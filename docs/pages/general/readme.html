<!doctype html>
<html lang="en">
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="/Users/aklump/Code/Packages/php/phpswap/docs/dist/node_modules/bootstrap/dist/css/bootstrap.css?ver=0.0.1">
      <link rel="stylesheet" href="/Users/aklump/Code/Packages/php/phpswap/docs/dist/style.css?ver=0.0.1">
      <link rel="stylesheet" href="/Users/aklump/Code/Packages/php/phpswap/docs/dist/node_modules/bootstrap-icons/font/bootstrap-icons.min.css?ver=0.0.1">
    <title>PHP Swap | Book</title>
</head>
<body class="my-5">

<header class="header bg-light fixed-top p-2 pt-1">
  <div class="container-md">
    <div class="d-flex justify-content-between align-items-center">
      <div class="header__breadcrumbs flex-shrink-0 flex-grow-1 me-3">
        <nav aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
      <a class="fw-bold" href="/Users/aklump/Code/Packages/php/phpswap/docs/index.html">Book</a>
    </li>
    <li class="breadcrumb-item">
      <a class="fw-bold" href="#" data-bs-toggle="offcanvas"
         data-bs-target="#table-of-contents"
         aria-controls="table-of-contents">TOC</a>
    </li>
    <li class="breadcrumb-item">
      <a href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/readme.html">General</a></li>
  </ol>
</nav>

      </div>
      <div class="header__tags me-3">  </div>
      <div class="header__page-numbers flex-shrink-1">1
        / 2</div>
    </div>
  </div>
</header>

<main class="container-md flex-column">
  <div class="row mb-5 pt-5">
    <article class="col">
      <h1 class="mb-4 text-primary">PHP Swap</h1>
      <h2>Summary</h2>
<p>Provides a means to execute code under different PHP versions from the CLI. This was first built to run PhpUnit tests against Composer projects across different PHP versions. See example below.</p>
<h2>Quick Start</h2>
<p>This simple code example should give you an idea of how this works.</p>
<pre><code class="shell">mkdir foo
cd foo
composer init
composer require aklump/phpswap
php -v
./vendor/bin/phpswap use 5.6 "php -v; echo"
./vendor/bin/phpswap use 8.1 "php -v; echo"
</code></pre>
<h2>What It Does</h2>
<ul>
<li>Temporarily modifies <code>$PATH</code> so that the requested PHP is used.</li>
<li>Runs <code>composer update</code> so that dependencies are updated for the correct PHP version.</li>
<li>Runs the given executable, which can be a command or a script path</li>
<li>Restores the original PHP version and runs <code>composer update</code> once again to restore the original dependencies. (Unless <code>--no-composer-restore</code> is used.)</li>
</ul>
<h2>What PHP Versions Are Supported?</h2>
<p>To see the available versions, which will echo those versions provided by MAMP you can use the <code>show</code> command.</p>
<pre><code class="bash">./vendor/bin/phpswap show
</code></pre>
<h2>Dependencies</h2>
<ul>
<li><a href="https://www.mamp.info/en/mamp">MAMP</a></li>
</ul>
<h2>Getting Started</h2>
<ol>
<li>Ensure you have MAMP installed.</li>
<li>Download all PHP versions using MAMP that you hope to swap.</li>
<li><code>composer require aklump/phpswap</code> in your project.</li>
<li>Use <code>vendor/bin/phpswap show</code> to see what versions are available.</li>
<li><code>./phpswap list</code> to see all available commands.</li>
</ol>
<h2>Examples with PhpUnit</h2>
<p>Here is a pattern you can use to run PhpUnit under PHP 7.1, 7.4 and 8.1.</p>
<ul>
<li>Given you have installed phpunit in your project with Composer</li>
<li>And you run your tests using <code>./vendor/bin/phpunit -c phpunit.xml</code></li>
<li>Then you can implement PhpSwap in the following way:</li>
</ul>
<pre><code class="shell">./vendor/bin/phpswap use 7.1 --no-composer-restore './vendor/bin/phpunit -c phpunit.xml'
./vendor/bin/phpswap use 7.4 --no-composer-restore './vendor/bin/phpunit -c phpunit.xml'
./vendor/bin/phpswap use 8.1 './vendor/bin/phpunit -c phpunit.xml'
</code></pre>
<h2>CLI Options</h2>
<h3><code>-v</code></h3>
<p>In verbose mode you will see the Composer output.</p>
<h3><code>--no-composer-restore</code></h3>
<p><strong>Use this option to save time</strong> if restoring the Composer dependencies is not necessary. In the PhpUnit examples above, it is not necessary to restore the dependencies after running against PHP 7.1, because the next line will install the dependencies necessary for testing against PHP 7.4. but the last line it's omitted because we want to restore the composer dependencies back to how they were originally.</p>
<p>When this option used, a file called <em>composer.lock.phpswap</em> will remain in your project. It contains a copy of the <em>composer.lock</em> file that was in your project before the first swap command. This file is used to replace <em>composer.lock</em> at the end of a swap <strong>without</strong> the <code>--no-composer-restore</code> option. However when using this option it remains.</p>
<p>To quickly resolve this you can do something like <code>./vendor/bin/phpswap use 7.4 "echo"</code>  The PHP version is irrelevant in this case.</p>
<h2>Troubleshooting</h2>
<p>If you try to run a command and see "Composer detected issues in your platform:", try running <code>composer update</code> then repeat your command.</p>
    </article>
  </div>
</main>

  <footer class="footer d-flex justify-content-center">
    <div class="flex-column justify-content-center">
                  Version:
          <strong>0.0.1</strong>
          &bull;
                Last Update: <strong>10/8/2023</strong>
    </div>
  </footer>


<nav class="nav d-flex justify-content-center align-items-center
  fixed-bottom">
  <div class="btn-group flex-fill">
              <a href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/readme.html" class="btn nav__prev-chapter btn-secondary"><i class="bi
      bi-caret-left-fill"></i> PHP Swap</a>
  
    
              <span class="btn nav__prev-page js-nav__prev-page
    btn-primary"></span>
  
    
    <a class="nav__toc btn btn-light" href="#"
       data-bs-toggle="offcanvas"
       data-bs-target="#table-of-contents"
       aria-controls="table-of-contents"><i class="bi
           bi-list-ol"></i></a>
    
              <a href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/changelog.html" class="btn nav__next-page js-nav__next-page
    btn-primary"><i class="bi bi-file-earmark"></i> Changelog <i class="bi
       bi-caret-right-fill"></i></a>
  
    
              <span class="btn nav__next-chapter btn-secondary "></span>
  
  </div>
</nav>


<div class="offcanvas offcanvas-start" tabindex="-1" id="table-of-contents"
     aria-labelledby="table-of-contents__title" data-bs-keyboard="true">
  <div class="offcanvas-header">
    <h1 class="h6 offcanvas-title js-chapter-list-title"
        id="table-of-contents__title">All
      Chapters
      &amp; Pages</h1>
    <h1 class="d-none h6 offcanvas-title js-search-results-title"
        id="table-of-contents__title">Search Results</h1>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
          <input class="js-search form-control mb-4" type="search"
             placeholder="Search docs..."
             aria-label="Search">
      <div class="js-search-results d-none">
        <h2 class="h4 mt-4">Matched Pages</h2>
        <ol class="list-unstyled">
                                              <li data-page="readme" value="1">
      <a class="js-page-link" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/readme.html">PHP Swap<span
              class="js-search-score
              badge
              bg-info rounded-pill badge-sm"></span></a>&nbsp;[General]
    </li>
  
                                    <li data-page="changelog" value="2">
      <a class="js-page-link" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/changelog.html">Changelog<span
              class="js-search-score
              badge
              bg-info rounded-pill badge-sm"></span></a>&nbsp;[General]
    </li>
  
                              </ol>
      </div>
        
    <div class="js-chapter-list">
              <h2 class="h4 mt-4">General</h2>
        <ol>
                                <li data-page="readme" value="1">
      <a class="js-page-link" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/readme.html">PHP Swap</a>&nbsp;[General]
    </li>
  
                                <li data-page="changelog" value="2">
      <a class="js-page-link" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/changelog.html">Changelog</a>&nbsp;[General]
    </li>
  
                  </ol>
          </div>
  </div>
</div>
<div class="modal fade" id="modal" tabindex="-1"
     aria-labelledby="modal-title" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="js-modal-title modal-title" id="modal-title"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class="mt-1 mb-4">
                  </p>
        
                
        <ul class="list-group list-group-flush">
                                    <a class="list-group-item list-group-item-action"
                 data-tags="[]" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/readme.html">PHP Swap</a>
                                                <a class="list-group-item list-group-item-action"
                 data-tags="[]" href="/Users/aklump/Code/Packages/php/phpswap/docs/pages/general/changelog.html">Changelog</a>
                              </ul>
      </div>
    </div>
  </div>
</div>

  <script src="/Users/aklump/Code/Packages/php/phpswap/docs/dist/node_modules/bootstrap/dist/js/bootstrap.min.js?ver=0.0.1"></script>
  <script src="/Users/aklump/Code/Packages/php/phpswap/docs/dist/dist/lunr.js?ver=0.0.1"></script>
  <script src="/Users/aklump/Code/Packages/php/phpswap/docs/dist/knowledge.min.js?ver=0.0.1"></script>

</body>
</html>
